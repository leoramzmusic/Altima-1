<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Calidad | Altima</title>
<link rel="icon" type="image/png" sizes="32x32"
	href="dist/img/favicon.ico">
<!-- Tell the browser to be responsive to screen width -->
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Custom CSS -->
<link rel="stylesheet" href="/dist/css/custom.css">
<!-- Font Awesome -->
<link rel="stylesheet" href="/plugins/fontawesome-free/css/all.min.css">
<!-- Icons Design -->
<link rel="stylesheet" href="/dist/css/font/flaticon.css">
<!--  Font generated by <a href="https://www.flaticon.com">flaticon.com</a>. <p>Under <a href="http://creativecommons.org/licenses/by/3.0/">CC</a>: <a data-file="036-zipper" href="https://www.flaticon.com/authors/smalllikeart">smalllikeart</a></p-->
<!-- Ionicons -->
<link rel="stylesheet"
	href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
<!-- overlayScrollbars -->
<link rel="stylesheet" href="/dist/css/adminlte.min.css">
<!-- Datatables Plugin-->
<link rel="stylesheet" href="/dist/css/jquery.dataTables.min.css">
<!-- Datatables Plugin-->
<link rel="stylesheet" href="/dist/css/dataTables.bootstrap4.min.css">
<link rel="stylesheet" href="/dist/css/fixedHeader.bootstrap.min.css">
<link rel="stylesheet" href="/dist/css/responsive.bootstrap.min.css">
<!--  -->
        <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
<!-- Select2 -->
<link rel="stylesheet" href="/plugins/select2/css/select2.min.css">
<link rel="stylesheet"
	href="/plugins/select2-bootstrap4-theme/select2-bootstrap4.min.css">
<!-- select2 -->
<link href="/dist/css/select2.min.css" rel="stylesheet" />
<!-- select2-bootstrap4-theme -->
<link href="/dist/css/select2-bootstrap4.css" rel="stylesheet">
<!-- Google Font: Source Sans Pro -->
<link
	href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700"
	rel="stylesheet">
</head>

<body class="hold-transition sidebar-mini layout-fixed sidebar-collapse">
	<!-- Site wrapper -->
	<div class="wrapper">

		<!-- Navbar -->
		<div th:insert="navegacion-nav"></div>
		<!-- /.navbar -->
		<!-- Modal -->
		<div th:insert="navegacion-logout"></div>
		<!-- Main Sidebar Container -->
		<div th:insert="navegacion-aside"></div>

		<!-- Content Wrapper. Contains page content -->
		<div class="content-wrapper">
			<!-- Content Header (Page header) -->
			<section class="content-header">
				<div class="container-fluid">
                    <div class="row mb-2">
                        <div class="col-sm-6">
                            <h1>
								Calidad 
							</h1>
                        </div>
                        <div class="col-sm-6">
                            <ol class="breadcrumb float-sm-right">
                                <li class="breadcrumb-item"><a href="#">Dashboard</a></li>
                                <li class="breadcrumb-item active">Dise&ntilde;o</li>
                                <li class="breadcrumb-item active">Calidad</li>
                            </ol>
                        </div>
                    </div>
                </div>
				<!-- /.container-fluid -->
			</section>
			<!-- Main content -->
			<section class="content">
				<div class="container-fluid">
					<div class="row">
						<div class="col-12">
							<!-- Default box -->
							<div class="card">
								<div class="card-header bg-dark">
									<h3 class="card-title">Pruebas de calidad</h3>
								</div>
								<div class="card-body">
									<table class="table tablexd table-striped table-bordered">
										<thead>
											<tr>
												<th>Clave</th>
												
												<th>Nombre</th>
												<th>Pruebas</th>
												<th>Estatus</th>
												<th>Detalles</th>
												<th>Operaciones</th>
											</tr>
										</thead>
										</tbody>
											<tr th:each="calidades, calidad:${listCalidades}">
												<td th:text="${calidades[1]}"></td>
												
												<td th:text="${calidades[3]}"></td>
												<td class="tdcenter"><a class="btn btn-info popoverxd text-white" data-container="body" data-placement="top" data-html="true"
													data-content="<strong>Prueba de encogimiento: </strong>En proceso<br>
																  <strong>Prueba de lavado y pilling: </strong>En proceso<br>
																  <strong>Prueba de costura: </strong>Terminada<br>
																  <strong>Prueba de contaminaci&oacute;n: </strong>En proceso"
													style="border-radius: 35%;"><i class="fas fa-info fa-sm"></i></a>&nbsp;
												</td>
												<td >Pendiente</td>
												<td class="tdcenter">
													<a  th:if="${calidades[4]=='Tela'}" th:href="@{detalle-calidad/tela/}+${calidades[0]}" class="btn btn-info text-white">
														<i class="fas fa-info-circle"></i> Ver m&aacute;s detalles
													</a>
													<a  th:if="${calidades[4]=='Forro'}" th:href="@{detalle-calidad/forro/}+${calidades[0]}" class="btn btn-info text-white">
														<i class="fas fa-info-circle"></i> Ver m&aacute;s detalles
													</a>
													<a  th:if="${calidades[4]=='Material'} and ${calidades[6]!='sin archivo'}" th:href="@{/uploads/calidadarchivos/}+${calidades[6]}" class="btn btn-info text-white popoverxd"  download data-container="body" data-placement="top" data-content="Descargar archivo">
														<i class="fas fa-info-circle"></i> Ver m&aacute;s detalles
													</a>
													<a style='width:153.72px;' th:if="${calidades[4]=='Material'} and ${calidades[6]=='sin archivo'}" class="btn btn-info text-white popoverxd" data-container="body" data-placement="top" data-html="true" data-content="Ingrese un archivo mediante el botón editar para poder descargarlo">
														<i class="fas fa-info-circle"></i>Sin archivo
													</a>
													
												</td>						
												<td class="tdcenter">
													<a class="btn btn-warning popoverxd" th:href="@{/calidad-nueva-prueba/tela/}+${calidades[0]}"  th:if="${calidades[4]=='Tela'}" data-container="body" data-placement="top" data-content="Editar" style="border-radius: 35%;">
														<i class="fas fa-pen fa-sm"></i>
													</a>
													<a class="btn btn-warning popoverxd" th:href="@{/calidad-nueva-prueba/forro/}+${calidades[0]}"  th:if="${calidades[4]=='Forro'}" data-container="body" data-placement="top" data-content="Editar" style="border-radius: 35%;">
														<i class="fas fa-pen fa-sm"></i>
													</a>
													<a class="btn btn-warning popoverxd" th:href="@{/calidad-nueva-prueba-otro/}+${calidades[0]}"  th:if="${calidades[4]=='Material'}" data-container="body" data-placement="top" data-content="Editar" style="border-radius: 35%;">
														<i class="fas fa-pen fa-sm"></i>
													</a>
													<a onclick="aceptarCalidad()" class="btn btn-success text-white btn-circle btn-sm popoverxd" data-container="body" data-placement="top" data-content="Aprobar"><i class="fas fa-check"></i></a>
													<a onclick="rechazarCalidad()" class="btn btn-danger text-white btn-circle btn-sm popoverxd" data-container="body" data-placement="top" data-content="Rechazar"><i class="fas fa-times"></i></a>
													<button th:if="${calidades[5]!=0}" type="button" class="btn btn-dark text-white btn-circle btn-sm popoverxd" data-toggle="modal" th:attr="data-target='#exampleModalCenter'+${calidad.index}" data-placement="top" data-content="Archivo de consentimiento">
  														<i class="fas fa-file-signature"></i>
													</button>
												<form th:action="@{/calidad-consentimiento}" method="post"
													enctype="multipart/form-data">
													<input type="hidden" th:value="${calidades[5]}" name="id"
														class="form-control">
													<div class="modal fade"
														th:id="exampleModalCenter+''+${calidad.index}"
														tabindex="-1" role="dialog"
														aria-labelledby="exampleModalCenterTitle"
														aria-hidden="true">
														<div class="modal-dialog modal-dialog-centered"
															role="document">
															<div class="modal-content">
																<div class="modal-header">
																	<h5 class="modal-title" id="exampleModalLongTitle">
																		<strong>Archivo de consentimiento</strong>
																	</h5>
																	<button type="button" class="close"
																		data-dismiss="modal" aria-label="Close">
																		<span aria-hidden="true">&times;</span>
																	</button>
																</div>
																<div class="modal-body">
																	<div class="input-group">
																		<div class="custom-file">
																			<input type="file" class="custom-file-input" th:id="inputGroupFile+''+${calidad.index}"
																				name="file" accept=".xls,.xlsx,.pdf"> <label
																				for="inputGroupFile+''+${calidad.index}" class="custom-file-label"
																				th:utext="${calidades[7]}" >seleccione archivo</label>
																		</div>
																	</div>
																</div>
																<div class="modal-footer">
																	<button type="button" class="btn btn-secondary"
																		data-dismiss="modal">Cerrar</button>
																	<a th:if=" ${calidades[7]!='sin archivo'}"
																		th:href="@{/uploads/calidadconsentimiento/}+${calidades[7]}"
																		class="btn btn-info text-white popoverxd" download
																		data-container="body" data-placement="top"
																		data-content="Descargar archivo"> <i
																		class="fas fa-cloud-download-alt"></i> Descargar
																	</a>
																	<button type="submit" class="btn btn-primary">Guardar</button>
																</div>
															</div>
														</div>
													</div>
												</form> 
											</td>
											</tr>
										<tbody>
									</table>
									
								</div>
								<!-- /.card-body -->
							</div>
							<!-- /.card -->
						</div>
					</div>
				</div>
			</section>
			<!-- /.content -->
		</div>
		<!-- /.content-wrapper -->

		<div th:insert="navegacion-footer"></div>
	</div>
	<!-- ./wrapper -->

	<!-- jQuery -->
	<script src="/plugins/jquery/jquery.min.js"></script>
	<!-- Bootstrap 4 -->
	<script src="/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
	<!-- AdminLTE App -->
	<script src="/dist/js/adminlte.min.js"></script>
	<!-- AdminLTE for demo purposes -->
	<script src="/dist/js/demo.js"></script>
	<!-- Select2 -->
	<script src="/plugins/select2/js/select2.full.min.js"></script>
	<!-- SweetAlert -->
	<script src="/dist/js/sweetalert.js"></script>
	<!-- Funcionalidad-->
	<script src="/dist/js/Muestras.js"></script>
	<!-- Datatables Plugin-->
	<script src="/dist/js/jquery.dataTables.min.js"></script>
	<script src="/dist/js/dataTables.buttons.min.js"></script>
	<script src="/dist/js/buttons.colVis.min.js"></script>
	<!-- Bootstrap Datatables Plugin-->
	<script src="/dist/js/dataTables.bootstrap4.min.js"></script>
	<!-- TABLA RESPONSIVA -->
	<script
		src="https://cdn.datatables.net/fixedheader/3.1.6/js/dataTables.fixedHeader.min.js"></script>
	<script
		src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js"></script>
	<script
		src="https://cdn.datatables.net/responsive/2.2.3/js/responsive.bootstrap.min.js"></script>
	<!-- select2 -->
	<script src="dist/js/select2.min.js"></script>
	<script src="dist/js/PruebasCalidad.js"></script>
	<script>
	var lengthid=$('input[id^=inputGroupFile]').length;
	var id='#inputGroupFile';
	for (i = 0; i < lengthid; i++) {
		  $(id.concat(i)).on('change',function(){
              var fileName = $(this).val().replace('C:\\fakepath\\', " ");
              $(this).next('.custom-file-label').html(fileName);
          })
		}   
    </script>
	<script>
		$(function() {
			$('select').each(function() {
				$(this).select2({
					theme : 'bootstrap4',
					width : 'style',
					placeholder : $(this).attr('placeholder'),
					allowClear : Boolean($(this).data('allow-clear')),
				});
			});
		});
	</script>
	<!-- Popover-->
	<script>
		$(function() {
			$('.popoverxd').popover({
				container : 'body',
				trigger : 'hover'
			})
		})
	</script>
	<!-- Script de la tabla -->
	<script>
	$(document).ready(function() {
		listarTabla();
	});
	
	</script>
	<script>
		function changeClassById() {
			document.getElementById("menuDiseno").className = "nav-item has-treeview menu-open";
			document.getElementById("navDiseno").className = "nav-link active";
			document.getElementById("navDiseno1").className = "nav-link active";
		}
		window.onload = changeClassById();
	</script>
	<script>
		if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i
				.test(navigator.userAgent)) {
			console.log('Esto es un dispositivo móvil');
		} else {
			console.log('Esto es una computadora');
		}
	</script>
	<script src="dist/js/calidadConfirmaciones.js"></script>
</body>

</html>
